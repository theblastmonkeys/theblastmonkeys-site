<!DOCTYPE html>
<html>
<head>
  <title>The Blast Monkeys</title>
  <style>
    body {
      background-color: black;
      font-family: "Courier New", monospace;
      color: #00ff00;
      text-align: center;
      cursor: pointer;
    }
    h1 {
      font-size: 40px;
      color: #00ff00;
      letter-spacing: 4px;
      text-transform: uppercase;
      padding: 20px;
      border: 2px double #00ff00;
      width: fit-content;
      margin: 20px auto;
      background: #000000;
      animation: powerup 2s ease-out forwards;
      opacity: 0;
    }
    @keyframes powerup {
      0% { opacity: 0; filter: brightness(0.5) blur(2px); transform: scale(0.95); }
      50% { opacity: 1; filter: brightness(1.5) blur(0); transform: scale(1.05); }
      100% { opacity: 1; filter: brightness(1); transform: scale(1); }
    }
    h2 {
      font-size: 24px;
      color: #00ff00;
      background-color: #000000;
      border-bottom: 1px dashed #00ff00;
      padding-bottom: 5px;
    }
    .section {
      border: 2px groove #00ff00;
      margin: 20px auto;
      padding: 10px;
      width: 85%;
      background-color: #000000;
    }
    .crt {
      border: 4px ridge #00ff00;
      background-color: #001100;
      box-shadow: 0 0 20px #00ff00;
      padding: 20px;
      display: inline-block;
      margin-top: 10px;
      position: relative;
      overflow: hidden;
    }
    .crt::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: repeating-linear-gradient(to bottom, rgba(0, 255, 0, 0.05), rgba(0, 255, 0, 0.05) 1px, transparent 1px, transparent 2px);
      pointer-events: none;
      z-index: 2;
    }
    .crt::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(0,255,0,0.1) 0%, rgba(0,0,0,0.2) 70%);
      pointer-events: none;
      z-index: 1;
    }
    .crt iframe {
      position: relative;
      z-index: 3;
    }
    .blinking {
      color: #00ff00;
      animation: blink 1s step-start infinite;
    }
    @keyframes blink {
      50% { opacity: 0; }
    }
    ul {
      text-align: left;
      margin-left: 10%;
      font-size: 16px;
    }
    ul li span.time { font-style: italic; margin-left: 8px; }
    ul li span.location { font-weight: bold; margin-left: 8px; }
    input[type="email"], input[type="submit"] {
      margin: 5px;
      padding: 5px;
      background-color: black;
      color: #00ff00;
      border: 1px solid #00ff00;
      font-family: "Courier New", monospace;
      cursor: pointer;
    }
    marquee {
      font-size: 14px;
      color: #00ff00;
      margin-top: 10px;
    }
    iframe { border: none; }
    .socials {
      margin: 20px 0;
    }
    .socials a {
      color: #00ff00;
      text-decoration: none;
      margin: 0 10px;
      font-weight: bold;
    }
    .socials a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>The Blast Monkeys</h1>

  <div class="socials">
    <a href="https://instagram.com/theblastmonkeys" target="_blank">Instagram</a>
    <a href="https://youtube.com/channel/UCph3BU9_Qir9XgST1ckuhXg" target="_blank">YouTube</a>
    <a href="https://www.facebook.com/profile.php?id=100064344936184" target="_blank">Facebook</a>
    <a href="https://tiktok.com/@the_blast_monkeys" target="_blank">TikTok</a>
  </div>

  <div class="section">
    <h2>Listen Now</h2>
    <div class="crt">
      <iframe src="https://open.spotify.com/embed/artist/2jN1t3YxArcbP4Ys6LKt34?utm_source=generator&autoplay=true" width="500" height="152" frameborder="0" allowtransparency="true" allow="autoplay"></iframe>
    </div>
  </div>

  <div class="section">
    <h2>Upcoming Shows</h2>
    <ul id="event-list">
      <li>Loading events...</li>
    </ul>
  </div>

  <div class="section">
    <h2>Also on Bandcamp</h2>
    <iframe style="border: 2px inset #00ff00; width: 350px; height: 470px; background-color: black;" 
    src="https://bandcamp.com/EmbeddedPlayer/album=2649480158/size=large/bgcol=000000/linkcol=00ff00/tracklist=true/artwork=small/transparent=true/" 
    seamless>
    <a href="https://theblastmonkeys.bandcamp.com/album/monkey-business">Monkey Business by The Blast Monkeys</a>
    </iframe>
  </div>

  <div class="section">
    <h2>Join the Fan Club</h2>
    <form action="https://formsubmit.co/theblastmonkeys@gmail.com" method="POST">
      <input type="hidden" name="_next" value="https://theblastmonkeys.com/thank-you.html">
      <input type="email" name="email" placeholder="Your email" required>
      <input type="submit" value="Join">
    </form>
  </div>

  <marquee behavior="scroll" direction="left">Welcome to the official website of The Blast Monkeys! Check back often for updates!</marquee>
  <p class="blinking">[UNDER CONSTRUCTION]</p>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const calendarId = "r07opm4j0us3ms824tqgc05de8@group.calendar.google.com";
      const apiKey = "AIzaSyAXCfYAROurZMhJynWp6EFPOOlnIbJDD8E";
      const eventsList = document.getElementById("event-list");
      const timeMin = new Date().toISOString();
      const maxResults = 10;

      fetch(`https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events?key=${apiKey}&timeMin=${timeMin}&singleEvents=true&orderBy=startTime&maxResults=${maxResults}`)
        .then(response => response.json())
        .then(data => {
          eventsList.innerHTML = "";
          if (!data.items || data.items.length === 0) {
            eventsList.innerHTML = "<li>No upcoming shows found.</li>";
            return;
          }
          data.items.forEach(event => {
            const li = document.createElement("li");
            const date = new Date(event.start.dateTime || event.start.date);
            const time = event.start.dateTime ? date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : "All Day";
            let location = event.location || "";
            location = location.replace(/\b\d{5}(-\d{4})?\b/g, '').replace(/,?\s*United States( of America)?/gi, '').trim();
            if (location.endsWith(',')) location = location.slice(0, -1);
            const locationText = location ? `<span class="location">@ ${location}</span>` : "";
            li.innerHTML = `${date.toDateString()}<span class="time">${time}</span> â€“ ${event.summary} ${locationText}`;
            eventsList.appendChild(li);
          });
        })
        .catch(error => {
          eventsList.innerHTML = "<li>Could not load events.</li>";
          console.error("Error fetching events:", error);
        });
    });
  </script>
</body>
</html>
